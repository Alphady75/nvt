<div class="card">
	<div class="card-header bg-primary py-3">
		<h2 class="font-size-18 text-light">Commandes ({{ commandes.getTotalItemCount }})</h2>
	</div>
	<div class="card-body">

		{% include "commande/composants/_filtre.html.twig" %}

		<h4 class="h5">Liste des commandes</h4>

		<div class="table-rep-plugin pb-4">
			<div class="table-responsive mb-0" data-bs-pattern="priority-columns">
				<table id="tech-companies-1" class="table no-radius table-striped table-hover">
					<thead class="text-left bg-light text-dark font-weight-bold">
						<tr>
							<th>NUM VEHICULE</th>
							<th>CONTRAT REF CLIENT</th>
							<th>DT COM PORTABLE</th>
							<th>CODE CONDUCTEUR</th>
							<th>ITINERAIRE/DESTINATION</th>
							<th>EMBALLAGE</th>
							<th>POSITION RECU LE</th>
							<th>ACTION</th>
						</tr>
					</thead>
					<tbody>

						{% for commande in commandes %}
						<tr>
							<td>
								<span class="co-name text-uppercase small">{{ commande.vehicule.id }}
									<br>
									{{
									commande.vehicule.name }}</span>
							</td>
							<td>
								<span class="co-name text-uppercase small">Contrat
									<br>
									ref client</span>
							</td>
							<td>
								<span class="co-name text-uppercase small">{{ commande.client.telephone }}</span>
							</td>
							<td>
								<span class="co-name text-uppercase small">
									{{ commande.conducteur.code }}
									<br>
									{{ commande.conducteur.nom ~ ' ' ~
									commande.conducteur.prenom }}
								</span>
								<br><br>
								{{ include('commande/_notification_form.html.twig') }}
							</td>
							<td>
								{% if commande.client.itineraires|length > 0 %}

								{% for itineraire in commande.client.itineraires %}
								<span>{{ itineraire.designation }}</span>
								{% endfor %}

								{% endif %}
								<br>
								{% if commande.destinations|length > 0 %}

								{% for destination in commande.destinations %}
								<span>CH: {{ destination.adresseChargement }} <br> LV: {{ destination.adresseLivraison }}</span>
								{% endfor %}

								{% endif %}
							</td>
							<td>
								<i class="fa fa-check text-{{ commande.emballage ? 'success' : 'light' }} btn btn-light btn-sm" style="font-size: 1em;"></i>
							</td>
							<td>

								{% if commande.destinations|length > 0 %}

								{% for destination in commande.destinations %}
								<span>CH: {{ destination.dateChargement|date('d/m/Y') }} <br> LV: {{
									destination.dateLivraison|date('d/m/Y') }}</span>
								{% endfor %}

								{% endif %}
							</td>
							<td>
								<a href="{{ path('commande_show', {id: commande.id}) }}" class="btn btn-light">
									<i class="mdi mdi-clipboard-search-outline"></i>
									Detail</a>
								<a href="{{ path('commande_edit', {id: commande.id}) }}" class="btn btn-light">
									<i class="mdi mdi-clipboard-edit-outline"></i>
									Modifier</a>
							</td>
						</tr>
						{% else %}
						<tr>
							<td colspan="7" class="text-center"><i class="fa-2x fas fa-search text-muted"></i> Aucune donn√©es
							</td>
						</tr>
						{% endfor %}

					</tbody>
				</table>
			</div>
		</div>
		{{ knp_pagination_render(commandes) }}
	</div>
</div>